<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Lemma 26.1</title>
    <link rel="stylesheet" type="text/css" media="screen" href="../style.css" />
</head>

<body>

<h1> Lemma 26.1</h1>

 <div class="section" >
    <div class="sec_title">
        <p>&nbsp &nbsp &nbsp Content</p>
    </div>
    <div class="content">
        <p>Let G(V,E) be a flow network with source s and sink t, and let f be a flow in G.</p>
        <p>Let G<sub>f</sub> be the residual network of G induced by f, and let f' be a flow in G<sub>f</sub>.</p>
        <p> (f &uarr; f') = f(u,v) + f'(u,v) - f'(v,u)</p>
        <p>Then |f &uarr; f'| = |f| + |f'|  </p>
    </div>
</div>

<div class="section" >
    <div class="sec_title">
        <p>&nbsp &nbsp &nbsp Proof part 1</p>
    </div>
    <div class="content">
        <p><b>Goal: Capacity Constraint</b></p>
        <p> We want to show after we augment the flow (f &uarr; f')(u,v), it still satisfies capacity constraint
        , that is:
        </p>
        <p> &nbsp; &nbsp; &nbsp; &nbsp; (1) Each flow is &geq; 0</p>
        <p> &nbsp; &nbsp; &nbsp; &nbsp; (2) Each flow is bounded by capacity of each edges</p>

        <p><b>(1)</b></p>
        <p>If (u,v) is in E, then <span id="1">c<sub>f</sub>(v,u) = f(u,v) </span></p>
        <p>&nbsp; &nbsp; &nbsp; &nbsp;  <span id="1_hint" style="visibility:hidden;"> 
          By definition, the part we can send back from v to u</span></p>
        
        <p>Therefore, <span id="2">f'(v,u) </span>&leq; c<sub>f</sub>(v,u) = f(u,v) </p>
        <p>&nbsp; &nbsp; &nbsp; &nbsp;  <span id="2_hint" style="visibility:hidden;"> 
             The flow in residual network from v to u, bounded by the part we can send back from v to u</span></p>
        
        <p> (f &uarr; f')(u,v) = f(u,v) + f'(u,v) - f'(v,u)</p>
        <p> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &geq; 
            f(u,v) + f'(u,v) - <span id="3">f(u,v)</span> &nbsp; &nbsp; 
            <span id="3_hint" style="visibility:hidden;"> (By inequality above) </span></p>

        <p> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; = 
            <span id="4">f'(u,v)</span> &nbsp; &nbsp; 
            <span id="4_hint" style="visibility:hidden;">(Cancell 1st and 3rd terms)</span></p>

        <p> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
            <span id="5">&geq; 0 </span>&nbsp; &nbsp; 
            <span id="5_hint" style="visibility:hidden;">(It is a flow value) </p>

        <p><b>(2)</b></p>
        <p> (f &uarr; f')(u,v) = f(u,v) + f'(u,v) - f'(v,u)
        
        <p> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
            <span id="6">&leq;</span> f(u,v) + f'(u,v) &nbsp; &nbsp; 
        <span id="6_hint" style="visibility:hidden;"> (Because f'(v,u) is nonnegative) </span></p>

        <p> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
            &leq; f(u,v) + <span id="7">c<sub>f</sub>(u,v)</span> &nbsp; &nbsp; 
            <span id="7_hint" style="visibility:hidden;"> (By inequality above) </span></p>
        
        <p> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
            = f(u,v) + <span id="8">c(u,v) - f(u,v)</span> &nbsp; &nbsp; 
            <span id="8_hint" style="visibility:hidden;"> (definition of c<sub>f</sub> when there's edge) </span></p>
        
        <p> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; = c(u,v)
        
    </div>
</div>

<div class="section" >
    <div class="sec_title">
        <p>&nbsp &nbsp &nbsp Proof part 2</p>
    </div>
    <div class="content">
        <p><b>Goal: Flow conservation</b></p>
        <p> We want to show after we augment the flow (f &uarr; f')(u,v), all edges still obey flow
            conservation, that is sum of incoming flow = sum of outgoing flow.
        </p>
       
        <p> &sum; <sub>v &isin; V</sub>(f &uarr; f')(u,v) = &sum; ( f(u,v) + f'(u,v) - f'(v,u) )</p>

        <p> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
             = <span id="9">&sum;f(u,v) + &sum;f'(u,v) - &sum; f'(v,u) </span>
            <span id="9_hint" style="visibility:hidden;">Sum up each part separately</span></p>
        
        <p> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
             = <span id="10">&sum;f(v,u) + &sum;f'(v,u) - &sum; f'(u,v) </span>
            <span id="10_hint" style="visibility:hidden;">Because each part of f and f' satisfies in=out</span></p>

            <p> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
             = <span id="11">&sum;f(v,u) + f'(v,u) - f'(u,v) </span>
            <span id="11_hint" style="visibility:hidden;">Sum together</span></p>

            <p> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
                = <span id="12">&sum; <sub>v &isin; V</sub>(f &uarr; f')(v,u) </span>
               <span id="12_hint" style="visibility:hidden;">That follows definition of (f &uarr; f')(v,u)</span></p>
   
    </div>
</div>

<div class="section" >
    <div class="sec_title">
        <p>&nbsp &nbsp &nbsp Proof part 3</p>
    </div>
    <div class="content">
        <p><b>Goal: Compute the value of f &uarr; f'</b></p>

        <p> For each vertex v in V, we define:</p>
        <p> &nbsp; &nbsp; &nbsp; &nbsp; V1 = {v : (s,v) in E}, that is set of all vertices with edge from s</p>
        <p> &nbsp; &nbsp; &nbsp; &nbsp; V2 = {v : (v,s) in E}, that is set of all vertices with edge to s</p>

        <p> In definition of G we disallow antiparallel edges in G. Because there can be no possibility that 
            we send values in both direction between the same 2 vertices, which means V1 and V2 has no intersection</p>
        
        <p> |f &uarr; f'| = 
            <span id="13">&sum; <sub>v &isin; V</sub>(f &uarr; f')(s,v) 
            - &sum; <sub>v &isin; V</sub>(f &uarr; f')(v,s)</span>
            <span id="13_hint" style="visibility:hidden;">By definition of flow value</span>
        </p>

        <p> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; = 
            &sum; <span id="14"><sub>v &isin; V1</sub></span>(f &uarr; f')(s,v) 
                - &sum; <sub>v &isin; V2</sub>(f &uarr; f')(v,s)
            <span id="14_hint" style="visibility:hidden;">By definition of V1 and V2 above. 
            For those not in these 2 sets, the flow value is 0.</span>
        </p>

        <p> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; = 
            &sum; <sub>v &isin; V1</sub>  <span id="15">  ( f(s,v) + f'(s,v) - f'(v,s) ) </span>
                - &sum; <sub>v &isin; V2</sub>  <span id="16"> ( f(v,s) + f'(v,s) - f'(s,v) ) </span>
            <span id="15_hint" style="visibility:hidden;">Expand by definition of f &uarr; f'.</span>
            <span id="16_hint" style="visibility:hidden;">Expand by definition of f &uarr; f'.</span>
        </p>

        <p> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; = 
            <span id="17">
                &sum; <sub>v &isin; V1</sub> f(s,v) 
                + &sum; <sub>v &isin; V1</sub> f'(s,v) 
                - &sum; <sub>v &isin; V1</sub> f'(v,s)

                - &sum; <sub>v &isin; V2</sub> f(v,s) 
                - &sum; <sub>v &isin; V2</sub> f'(v,s) 
                + &sum; <sub>v &isin; V2</sub> f'(s,v)
            </span>
            <span id="17_hint" style="visibility:hidden;">Expand the sum.</span>
        </p>

        <p> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; = 
            &sum; <sub>v &isin; V1</sub> f(s,v) 
            - &sum; <sub>v &isin; V2</sub> f(v,s) 

            + &sum; <sub>v &isin; V1</sub> f'(s,v) 
            + &sum; <sub>v &isin; V2</sub> f'(s,v)

            - &sum; <sub>v &isin; V1</sub> f'(v,s)
            - &sum; <sub>v &isin; V2</sub> f'(v,s)  </p>

        <p> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; = 
            &sum; <sub>v &isin; V1</sub> f(s,v) 
            - &sum; <sub>v &isin; V2</sub> f(v,s) 
            + &sum; <sub>v &isin; <span id="18">V1 &cup; V2</sub> </span> f'(s,v)
            - &sum; <sub>v &isin; <span id="19">V1 &cup; V2</sub> </span> f'(v,s) 
            <span id="18_hint" style="visibility:hidden;">Unite V1 and V2</span>
            <span id="19_hint" style="visibility:hidden;">Unite V1 and V2</span>
        </p>

        <p> And because there's no other edge from s to vertices not in V1, there's no flow </p>
        <p> There's no other edge from vertices not in V2 to s, there's no flow </p>
        <p> There's also no other edge from s to vertices not in V1 and V2 in flow f', no flow</p>
        <p> Same idea with from vertices to s</p>
        <p>Thus we can extend all summations to sum over V in the previous equation, that is:</p>

        <p> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; = 
            &sum; <sub>v &isin; V</sub> f(s,v) 
            - &sum; <sub>v &isin; V</sub> f(v,s) 
            + &sum; <sub>v &isin; V</sub> f'(s,v)
            - &sum; <sub>v &isin; V</sub> f'(v,s) 
        </p>

        <p> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; = 
            <span id="20">|f| + |'f| </span>
            <span id="20_hint" style="visibility:hidden;">By definition of flow value</span>
        </p>
    </div>
</div>

<script src="../js/26_1.js"></script>

</body>
</html>